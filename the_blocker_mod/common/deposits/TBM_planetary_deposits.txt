### The Blocker Mod - Vanilla Overwrite

#	Note: For initial release, vanilla features use is_homeworld to re-add lost districts to homeworlds. Otherwise, they start at size 25 with 0 free districts.
#	This will remain the case until a better solution is found (probably involved game_start events) and a compatibility headache.
#	Format below is: 
	# triggered_planet_modifier = {
	# 	potential = {
	# 		is_homeworld = yes
	# 	}
	# 	modifier = {
	# 		planet_max_district_add = however_many_it_took_away
	# 	}
	# }
#	This only applies to features space effects. You'll still get some nice bonuses, and you can still clear them.
#	Vanilla "blockers" will not spawn on homeworlds, in keeping with vanilla. Who needs mountains?
#	Blockers added at game_start by events will still appear.

@high = 16
@med = 8
@low = 4
@very_low = 2	# Added by TBM to help with some spawning

@high_rare = 0.5
@mid_rare = 0.25
@low_rare = 0.1

@planet_type_bonus = 1.5	# This is no longer used in TBM but am keeping it around for sentimental value.

@blocker_high = 10
@blocker_low = 5

### Blocker Replacement

d_mountain_range = {
	time = 950

	is_for_colonizable = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers
	icon = d_mountain_range
	
	use_for_min_max_adjustments = yes

	planet_modifier = {
		planet_max_districts_add = -3
		district_mining_max = 2
		planet_amenities_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			has_deposit_flag = mineral_rights
		}
		modifier = {
			district_mining_max = 2
			planet_miners_minerals_produces_mult = 0.05
		}
	}

	resources = {
		category = deposit_blockers
		cost = { 
			energy = 2000
		}
	}

	prerequisites = {
		"tech_terrestrial_sculpting"
	}

	on_cleared = {
		add_resource = {
			minerals = 2000
		}
	}

	potential = {
		planet_size > 10
		is_homeworld = no
	}

	drop_weight = {
		weight = @very_low

		modifier = {
			factor = 2
			planet_size < 15
			NOT = {
				is_moon = yes
			}
		}

		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_gaia	
			}		
		}
		modifier = {
			factor = 1.5
			OR = {
				is_planet_class = pc_arid
				is_planet_class = pc_continental	
			}
		}

		modifier = {
			factor = 2
			has_planet_modifier = pm_low_gravity
		}
		modifier = {
			factor = 1.5
			OR = {
				has_deposit = d_rich_mountain
				has_deposit = d_tempestous_mountain
				has_deposit = d_prosperous_mesa
				has_deposit = d_alien_pets_deposit
				has_deposit = d_arid_highlands	
			}
		}

		modifier = {
			factor = 2
			has_planet_modifier = pm_mineral_rich
		}
		modifier = {
			factor = 0.5
			OR = {
				has_planet_modifier = pm_mineral_poor
				has_planet_modifier = pm_asteroid_impacts
			}
		}
		modifier = {
			factor = 0
			has_planet_modifier = pm_high_gravity
		}
	}

	ai_weight = {
		weight = 1
	}
}

d_active_volcano = {

	time = 720

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	resources = {
		category = deposit_blockers
		cost = {
			energy = 1000
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_generator_max = 1
		planet_jobs_food_produces_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_volcano }
		}
		modifier = {
			planet_technician_alloys_produces_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			has_deposit_flag = volcano_erupted
		}
		modifier = {
			district_farming_max = -1
			district_mining_max = 1
		}
	}

	potential = {
		is_homeworld = no
	}

	on_cleared = {
		owner = {
			add_resource = {
				energy = 500
				minerals = 1500
			}
		}
	}

	drop_weight = {
		weight = @blocker_low
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_savannah
				is_planet_class = pc_ocean
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				is_planet_class = pc_arctic
				is_planet_class = pc_continental
				is_planet_class = pc_tundra
			}
		}
		
		modifier = {
			factor = 2
			OR = {
				planet_size < 15
				has_planet_modifier = pm_low_gravity
				has_deposit = d_geothermal_vent
			}
		}
	}
}

d_dangerous_wildlife_blocker = {
		
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	planet_modifier = {
		planet_researchers_society_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			has_job = livestock
		}
		modifier = {
			planet_livestock_food_produces_add = -1
		}
	}

	potential = {
		is_homeworld = no
	}

	on_cleared = {
		# Cull the Herd?
		planet_event = { id = tbm.5 }
	}

	drop_weight = {
		weight = @blocker_high
		
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_tropical
				is_planet_class = pc_nuked
				}
		}
		modifier = {
			factor = 1.5
			OR = {
				is_planet_class = pc_arctic
				is_planet_class = pc_savannah
			}
		}

		modifier = {
			factor = 0.5
			is_planet_class = pc_gaia
		}
		
		modifier = {
			factor = 2
			OR = {
				has_deposit = d_dense_jungle
				has_deposit = d_rugged_woods
				has_deposit = d_lush_jungle
			}
		}
		modifier = {
			factor = 2
			OR = {
				has_planet_modifier = pm_dangerous_wildlife
				has_planet_modifier = pm_titanic_life
			}
		}
		
	}
}

d_dense_jungle = {
	time = 720

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_food

	resources = {
		category = deposit_blockers_natural
		cost = {
			energy = 500
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		planet_jobs_food_produces_mult = 0.05
		planet_researchers_society_research_produces_add = 2
		planet_amenities_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 3
			planet_colonist_society_research_produces_add = 1
		}
	}

	on_cleared = {
		add_resource = {
			minerals = 500
			food = 200
			consumer_goods = 50
		}
	}

	potential = {
		OR = {
			is_wet = yes
			is_planet_class = pc_gaia
		}
		is_homeworld = no
	}
	
	drop_weight = {
		weight = @med
		
		modifier = {
			factor = 4
			planet_size > 20
		}
		modifier = {
			factor = 2
			planet_size > 15
		}
		modifier = {
			factor = 0.5
			planet_size < 13
		}

		modifier = {
			factor = 5
			is_planet_class = pc_tropical
		}
		modifier = {
			factor = 4
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 2.5
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 5
			has_planet_modifier = pm_lush
		}
	}
}

d_toxic_kelp = {
	time = 60

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	resources = {
		category = deposit_blockers
		cost = {
			trigger = {
				exists = owner
				owner = { has_trait = trait_aquatic	}
			}
			energy = 200
		}
		cost = {
			energy = 500
		}
	}

	planet_modifier = {
		trade_value_mult = -0.05
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 1
			planet_colonist_society_research_produces_add = 1
			planet_colonist_physics_research_produces_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner.species = {
				has_trait = trait_aquatic
			}
		}
		modifier = {
			planet_jobs_food_produces_mult = -0.05	
		}
	}

	on_cleared = {
		add_resource = {
			society_research = 500
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_ocean
			is_planet_class = pc_continental
			is_planet_class = pc_gaia
		}
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 4
			is_planet_class = pc_ocean
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			factor = 0
			is_dry = yes
			is_planet_class = pc_tundra
			is_planet_class = pc_alpine
		}

		modifier = {
			factor = 2
			has_deposit = d_tropical_island
		}
	}

	prerequisites = { "tech_toxic_kelp" }
}

d_deep_sinkhole = {
	time = 60

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	resources = {
		category = deposit_blockers
		cost = {
			energy = 200
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_mining_max = 1
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_minerals_produces_add = 2
			planet_colonist_engineering_research_produces_add = 1
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				minerals = 500
			}
		}
		
		# Clearing sinkholes sometimes makes other sinkholes.
		random_list = {
			33 = {
				set_planet_flag = occasional_sinkholes
			}
			66 = {}
		}
	}

	potential = {
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_low
		modifier = {
			factor = 2
			OR = {
				is_dry = yes
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				has_climate = wet
				is_planet_class = pc_arctic
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			factor = 0
			is_planet_class = pc_ocean
		}
	}
}

d_quicksand_basin = {
	time = 270

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	resources = {
		category = deposit_blockers
		cost = {
			energy = 650
		}
	}

	prerequisites = { "tech_noxious_swamp" }

	on_cleared = {
		add_resource = {
			minerals = 500
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		planet_miners_minerals_produces_mult = 0.05
		pop_happiness = -0.05
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_physics_research_produces_add = 1
			planet_colonist_engineering_research_produces_add = 1
		}
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_noxious_swamp }
		}
		modifier = {
			planet_miners_minerals_produces_mult = 0.05
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_technology = tech_quicksand_basin }
		}
		modifier = {
			planet_farmers_food_produces_mult = 0.05
		}
	}

	potential = {
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 2
			OR = {
				is_dry = yes
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_continental
				is_planet_class = pc_tundra
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_gaia
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			factor = 0
			is_planet_class = pc_alpine
		}
	}
}

d_noxious_swamp = {
	time = 240

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	resources = {
		category = deposit_blockers
		cost = {
			energy = 600
		}
	}

	prerequisites = { "tech_noxious_swamp" }

	on_cleared = {
		add_resource = {
			society_research = 500
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		pop_amenities_usage_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 5
			planet_colonist_society_research_produces_add = 1
			planet_colonist_engineering_research_produces_add = 1
		}
	}

	potential = {
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tundra
				is_wet = yes
			}
		}
		modifier = {
			factor = 2
			is_planet_class = pc_tropical
		}
		modifier = {
			factor = 1.5
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_arctic
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				has_climate = dry
				is_planet_class = pc_gaia
			}
		}
		modifier = {
			factor = 0
			num_free_districts = {
				type = district_city
				value < 2
			}
		}
	}
}

d_massive_glacier = {
	time = 1800

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	category = deposit_cat_blockers

	resources = {
		category = deposit_blockers
		cost = {
			energy = 3500
		}
	}

	planet_modifier = {
		planet_max_districts_add = -3
		planet_miners_minerals_produces_mult = 0.05
		planet_researchers_physics_research_produces_add = 1
		planet_researchers_engineering_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_minerals_produces_add = 2
			planet_colonist_engineering_research_produces_add = 1			
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				minerals = 1000
			}
		}
	}

	prerequisites = { "tech_massive_glacier" }

	potential = {
		is_homeworld = no
	}

	drop_weight = {
		weight = @very_low
		modifier = {
			factor = 10
			is_planet_class = pc_arctic
		}
		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_tundra
				is_planet_class = pc_continental
			}
		}
		modifier = {
			factor = 2
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_arid
				is_planet_class = pc_ocean
				is_planet_class = pc_tropical
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
				is_planet_class = pc_nuked
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_deposit = d_mountain_range
				has_deposit = d_rich_mountain
			}
		}
	}
}

### SPECIAL

d_radioactive_wasteland = {
	time = 720

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	category = deposit_cat_blockers

	planet_modifier = {
		planet_max_districts_add = -2
		planet_researchers_physics_research_produces_mult = 0.05
		pop_happiness_negative = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_physics_research_produces_add = 2
		}
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 2000
		}
	}

	potential = {
		is_planet_class = pc_nuked
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 5	# Not spawning enough on Tomb Worlds with other custom features.
			is_planet_class = pc_nuked
		}
	}
}

d_city_ruins = {
	time = 480

	use_for_min_max_adjustments = yes
	is_for_colonizable = yes
	category = deposit_cat_blockers

	potential = {
		OR = {
			is_planet_class = pc_nuked
			is_planet_class = pc_relic
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		planet_researchers_society_research_produces_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_society_research_produces_add = 2
		}
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 1200
		}
	}

	potential = {
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_high
		
		modifier = {
			factor = 2	# Mostly so it doesn't get crowded out by custom features.
			is_planet_class = pc_nuked
		}
	}
}

d_bomb_crater = {
	icon = d_crater

	time = 360

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	category = deposit_cat_blockers

	planet_modifier = {
		planet_max_districts_add = -1
		district_mining_max = 1
		planet_researchers_engineering_research_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_minerals_produces_add = 5
		}
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 1200
			minerals = 500
		}
	}

	potential = {
		is_planet_class = pc_nuked
		is_homeworld = no
	}

	drop_weight = {
		weight = @blocker_low
		
		modifier = {
			factor = 4	# Mostly to prevent these getting swamped by custom features.
			is_planet_class = pc_nuked
		}
		
		# Vanilla
		modifier = {
			factor = 0
			num_free_districts = {
				type = district_city
				value < 2
			}
		}
	}
}

d_slums = {
	time = 180

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	category = deposit_cat_blockers

	potential = {
		always = no
	}

	planet_modifier = {
		planet_max_districts_add = -1
		planet_researchers_society_research_produces_add = 1
		
		### Reduces amenities but also amenities usage; you'll get more of these on big worlds with lots of worker pops. At large populations, the percentage will outweigh the flat hit.
		### Egalitarian empires will struggle with the happiness penalties, but slums may be a useful buff for some ethic types (e.g., Authoritarian).
		planet_amenities_add = -5
		pop_amenities_usage_mult = -0.05

		pop_cat_worker_happiness = -0.05
		planet_crime_mult = 0.05
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 300
		}
	}
		
	on_cleared = {
		create_pop = {
			species = owner
		}
	}
}

d_crater = {
	time = 100

	is_for_colonizable = yes
	category = deposit_cat_blockers

	potential = {
		always = no
	}

	planet_modifier = {
		planet_max_districts_add = -1
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 300
		}
	}
}


# Failing Infrastructure are generated on homeworlds at game-start
# Additions from The Blocker Mod, and can be added via event - will not apply on homeworlds.
d_failing_infrastructure = {
	icon = d_metal_boneyard
	time = 120

	is_for_colonizable = yes
	category = deposit_cat_blockers

	potential = { always = no }

	planet_modifier = {
		planet_max_districts_add = -1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = no
		}
		modifier = {
			planet_researchers_engineering_research_produces_add = 1
			pop_happiness = -0.05
		}
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = no
		}
		modifier = {
			trade_value_mult = 0.02
			planet_crime_mult = 0.05
		}
	}

	use_weights_for_blocker_swap_types = yes
	blocker_swap_types = {
		d_rushing_waterfalls
		d_searing_desert
		d_frozen_gas_lake
		d_prosperous_mesa
		d_ore_rich_caverns
		d_fungal_caves
		d_lush_jungle
		d_fertile_lands
		d_great_river
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 300
		}
	}
}

###############
#### ENERGY ###
###############

d_arid_highlands = {
	time = 1800

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	
	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	category = deposit_cat_energy

	resources = {
		category = deposit_blockers
		produces = {
			trigger = {
				has_planet_flag = desert_strong
			}
			unity = 1
		}
		cost = {
			energy = 1800
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		district_generator_max = 1
		planet_buildings_energy_upkeep_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			OR = {
				has_planet_modifier = pm_hazardous_weather
				has_planet_modifier = pm_wild_storms
			}
		}
		modifier = {
			district_generator_max = 1
		}
	}
	
	# From A City of the Desert Chain
	triggered_planet_modifier = {
		potential = {
			owner = {
				has_modifier = waters_of_life
			}
		}
		modifier = {
			planet_jobs_food_produces_mult = 0.05
			district_farming_max = 1
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				minerals = 500
			}
		}
		#Event
	}

	potential = {
		OR = {
			is_dry = yes
			is_planet_class = pc_gaia
			is_planet_class = pc_nuked
		}
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 5
			is_planet_class = pc_arid
		}
		modifier = {
			factor = 2
			OR = {
				is_cold = yes
				is_wet = yes
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
			}
		}
		modifier = {
			factor = 0
			is_planet_class = pc_tropical
		}
	}

	prerequisites = { "tech_mountain_range" }
	
}

d_hot_springs = {
	time = 90
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_energy

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 600
		}
	}

	planet_modifier = {
		planet_amenities_add = 10
		pop_happiness = 0.05
		# Should also add spa building or possibly call spa event.
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_society_research_produces_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			is_cold = yes
		}
		modifier = {
			habitability_ceil_add = 0.05
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				society_research = 500
			}
		}
		add_modifier = {
			modifier = cleared_hot_springs
			years = 10
		}
		#add_deposit = d_geothermal_power_plant
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tundra
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 1.5
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 0.5
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 0
			is_planet_class = pc_savannah
		}

		modifier = {
			factor = 2
			OR = {
				has_deposit = d_geothermal_vent
				has_deposit = d_active_volcano
			}
		}
	}
}

d_rushing_waterfalls = {
	time = 1800
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes
	category = deposit_cat_energy

	use_weights_for_terraforming_swap_types = yes

	planet_modifier = {
		planet_amenities_add = 5
		pop_happiness = 0.05
		planet_clerks_unity_produces_add = 1	### Consider balance. Might be too strong, esp. on worlds that are large.
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_physics_research_produces_add = 1
		}
	}

	resources = {
		category = deposit_blockers
		produces = {
			unity = 2
		}
		cost = {
			energy = 1000
		}
	}

	on_cleared = {
		add_deposit = d_hydro_plant
		add_deposit = d_floodplains
		add_deposit = d_floodplains
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_tundra
				is_planet_class = pc_alpine
				is_planet_class = pc_gaia
			}
		}
		modifier = {
			factor = 0.25
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_savannah
				is_planet_class = pc_desert
			}
		}

		modifier = {
			factor = 2
			OR = {
				has_deposit = d_great_river
				has_deposit = d_mountain_range
			}
		}
	}
}

d_searing_desert = {

	time = 7200

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_energy

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers_natural
		produces = {
			trigger = {
				has_planet_flag = desert_strong
			}
			unity = 1
		}
		cost = {
			energy = 1000
		}
	}

	can_be_cleared = {
		NOR = {
			owner = {
				NOR = {
					has_country_flag = desert_cities
					has_modifier = waters_of_life
					has_modifier = great_desert_city
				}
			}
			planet = {
				OR = {
					has_modifier = bringing_water
					has_modifier = dream_city
				}
			}
		}
	}

	prerequisites = { "tech_housing_2" }

	planet_modifier = {
		planet_max_districts_add = -3
		district_generator_max = 1
		planet_technician_energy_produces_add = 2
		planet_buildings_energy_upkeep_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 3
		}
	}

	# From A City of the Desert Chain
	triggered_planet_modifier = {
		potential = {
			owner = {
				has_modifier = waters_of_life
			}
		}
		modifier = {
			planet_jobs_food_produces_mult = 0.05
			district_farming_max = 1
		}
	}

	potential = {
		NOR = {
			is_planet_class = pc_ocean
			is_planet_class = pc_tropical
			is_cold = yes
		}
	}

	drop_weight = {
		weight = @very_low
		
		modifier = {
			factor = 4
			planet_size > 20
		}
		modifier = {
			factor = 2
			planet_size > 15
		}
		modifier = {
			factor = 0.5
			planet_size < 13
		}
		
		modifier = {
			factor = 5
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			factor = 2
			is_dry = yes
		}
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_continental
			}
		}
		modifier = {
			factor = 0.25
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_ocean
				is_planet_class = pc_tropical
				is_cold = yes
			}
		}
	}
}

d_frozen_gas_lake = {
	time = 180
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_energy

	resources = {
		category = deposit_blockers
		cost = {
			energy = 600
			minerals = 300
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				exotic_gases = 50
			}
		}
	}

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_generator_max = 1
		planet_technician_energy_produces_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
		}
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 2
			is_cold = yes
		}
		modifier = {
			factor = 2
			OR = {
				has_deposit = d_bubbling_swamp
				has_deposit = d_fuming_bog
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_dry = yes
				is_planet_class = pc_tropical
				is_planet_class = pc_gaia
			}
		}
	}
}

d_geothermal_vent = {
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_energy

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		produces = {
			trigger = {
				has_modifier = studying_latent_underlying_geothermal_gas_eruption_rhythm
			}
			engineering_research = 2
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_generator_max = 1
		planet_technician_energy_produces_mult = 0.05
		planet_researchers_engineering_research_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_engineering_research_produces_add = 1
		}
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 2
			is_cold = yes
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_savannah
				is_planet_class = pc_nuked
			}
		}
		modifier = {
			factor = 0
			is_dry = yes
		}
		modifier = {
			add = 5		### Add is deliberate! Won't spawn on dry worlds UNLESS they have volcanic activity.
			has_deposit = d_active_volcano
		}
	}
}

d_underwater_vent = {
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_energy

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		produces = {
			trigger = {
				has_modifier = studying_latent_underlying_geothermal_gas_eruption_rhythm
			}
			engineering_research = 2
		}
	}

	planet_modifier = {
		district_generator_max = 1
		trade_value_mult = -0.1
		planet_researchers_engineering_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner.species = {
				has_trait = trait_aquatic
			}
			is_homeworld = no
		}
		modifier = {
			planet_max_districts_add = -2
			district_generator_max = 1
			district_farming_max = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_energy_produces_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_technology = tech_volcano
			}
		}
		modifier = {
			district_generator_max = 1
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_continental
			is_planet_class = pc_ocean
			is_planet_class = pc_arctic
			is_planet_class = pc_gaia
		}
	}
	
	drop_weight = {
		weight = @high
	}
}

d_tempestous_mountain = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_energy

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 1500
		}
	}

	on_cleared = {
		add_resource = {
			minerals = 1000
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		planet_amenities_add = 5
		district_mining_max = 1
		district_farming_max = 1
		district_generator_max = 1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_unity_produces_add = 5
		}
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_continental
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_savannah
				is_planet_class = pc_desert
				is_planet_class = pc_arctic
			}
		}
		modifier = {
			factor = 5
			has_deposit = d_mountain_range
		}
	}
}

###################
#### MINERALS #####
###################

d_veiny_cliffs = {
	time = 270
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 500
		}
	}

	on_cleared = {
		add_resource = {
			minerals = 500
			engineering_research = 100
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_mining_max = 2
		planet_miners_minerals_produces_mult = 0.05
		planet_amenities_add = -10
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
			planet_amenities_add = 10
		}
	}

	drop_weight = {
		weight = @med
		
		modifier = {
			factor = 2
			planet_size < 15
		}
		
		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_ocean
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 2
			is_planet_class = pc_continental
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_savannah
			}
		}
	}
}

d_mineral_fields = {
	time = 60
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_mining_max = 1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_minerals_produces_add = 2
		}
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 2
			OR = {
				is_cold = yes
			}
		}
		modifier = {
			factor = 0.5
			is_planet_class = pc_ocean
		}
		modifier = {
			factor = 0
			is_planet_class = pc_tropical
		}

		modifier = {
			factor = 6
			OR = {
				has_planet_modifier = pm_asteroid_impacts
				has_planet_modifier = pm_asteroid_belt
				has_planet_modifier = pm_mineral_rich
				has_deposit = d_crater
			}
		}
	}
}

d_prosperous_mesa = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 1500
		}
	}

	prerequisites = {
		"tech_mountain_range"
	}

	on_cleared = {
		owner = {
			add_resource = {
				minerals = 1000
			}
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		district_generator_max = 1
		district_mining_max = 1
		district_farming_max = 1
		planet_priests_unity_produces_mult = 0.1
		pop_housing_usage_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_continental
			is_planet_class = pc_tropical
			is_planet_class = pc_savannah
			is_planet_class = pc_desert
			is_planet_class = pc_gaia
			is_planet_class = pc_relic
		}
	}

	drop_weight = {
		weight = @blocker_low
		modifier = {
			factor = 2
			is_planet_class = pc_savannah
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_tundra
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 0
			is_planet_class = pc_ocean
		}
	}
}

d_ore_rich_caverns = {
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		district_mining_max = 2
		planet_miners_minerals_produces_mult = -0.05
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_minerals_produces_add = 1
		}
	}

	### Snazzy option to randomly add extra districts for variation, but potential performance hit?
	#	Also requires further testing.
	# triggered_planet_modifier = {
	# 	potential = {
	# 		check_variable_arithmetic = {
	# 			which = @random_feature
	# 			value = value:random_feature_value
	# 		}
	# 	}
	# 	modifier = {
	# 		district_mining_max = 1
	# 	}
	# }

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_origin = origin_subterranean
			}
		}
		modifier = {
			district_mining_max = 1
		}
	}

	drop_weight = {
		weight = @high
	}
}

d_rich_mountain = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes
	
	resources = {
		category = deposit_blockers
		cost = {
			energy = 1500
		}
	}

	prerequisites = {
		"tech_mountain_range"
	}

	on_cleared = {
		owner = {
			add_resource = {
				minerals = 1000
			}
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		district_mining_max = 2
		district_farming_max = 1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_minerals_produces_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			has_job = miner
		}
		modifier = {
			planet_miners_unity_produces_add = 1
		}
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tundra
				is_planet_class = pc_continental
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_arid
				is_planet_class = pc_arctic
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
				is_planet_class = pc_tropical
				is_planet_class = pc_nuked
			}
		}
	}
}

d_submerged_ore_veins = {
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		district_mining_max = 2
		planet_colonist_minerals_produces_add = 1
		planet_colonist_engineering_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner.species = { has_trait = trait_aquatic	}
			is_homeworld = no
		}
		modifier = {
			planet_max_districts_add = -2
			district_mining_max = 1
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_ocean
			is_planet_class = pc_continental
			is_planet_class = pc_gaia
		}
	}

	drop_weight = {
		weight = @high
		modifier = {
			factor = 2
			is_planet_class = pc_ocean
		}
	}
}

###################
##### FOOD	#####
###################
d_lichen_fields = {
	time = 60
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 300
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_farmers_unity_produces_add = 1
		pop_happiness = -0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
			planet_farmers_unity_produces_add = -1
			pop_happiness = 0.05
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
			planet_colonist_unity_produces_add = 1
		}
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 0.33
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 5
			OR = {
				is_planet_class = pc_tundra
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_arid
			}
		}
		modifier = {
			factor = 0.25
			is_planet_class = pc_continental
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_ocean
				is_planet_class = pc_tropical
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
			}
		}
	}
}

d_bountiful_plains = {
	time = 90

	icon = d_fertile_lands
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 2
		pop_happiness = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
			pop_happiness = -0.05
		}
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 4
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_savannah
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_tundra
				is_planet_class = pc_arid
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_arctic
				is_planet_class = pc_alpine
				is_planet_class = pc_desert
				is_planet_class = pc_ocean
				is_planet_class = pc_tropical
				is_planet_class = pc_nuked
			}
		}
	}
}

d_rugged_woods = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -2
		planet_jobs_food_produces_mult = 0.05
		planet_amenities_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
		}
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 500
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				minerals = 200
				food = 100
			}
		}
	}

	drop_weight = {
		weight = @med

		modifier = {
			factor = 4
			planet_size > 20
		}
		modifier = {
			factor = 2
			planet_size > 15
		}
		modifier = {
			factor = 0.5
			planet_size < 13
		}

		modifier = {
			factor = 5
			is_planet_class = pc_continental
		}
		modifier = {
			factor = 2.5
			OR = {
				is_planet_class = pc_gaia
				is_planet_class = pc_tropical
				is_planet_class = pc_tundra
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 0.1
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_arctic
				is_planet_class = pc_desert
				is_planet_class = pc_savannah
				is_planet_class = pc_arid
			}
		}

		modifier = {
			factor = 5
			has_planet_modifier = pm_lush
		}
	}
}

d_green_hills = {
	time = 270
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -2
		district_farming_max = 1
		planet_amenities_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				has_civic = civic_agrarian_idyll
			}
		}
		modifier = {
			district_farming_max = 1
		}
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 5
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 2
			is_wet = yes
		}
		modifier = {
			factor = 0.25
			is_planet_class = pc_tropical
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_arid
				is_planet_class = pc_desert
				is_planet_class = pc_arctic
				is_planet_class = pc_tundra
				is_planet_class = pc_nuked
			}
		}
	}
}

d_forgiving_tundra = {	
	time = 90

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		pop_ethic_spiritualist_attraction_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = {
				OR = {
					has_ethic = ethic_spiritualist
					has_ethic = ethic_fanatic_spiritualist
				}
			}
		}
		modifier = {
			pop_happiness = 0.5
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_continental
			is_planet_class = pc_arctic
			is_planet_class = pc_tundra
			is_planet_class = pc_alpine
			is_planet_class = pc_gaia
			is_planet_class = pc_nuked	# Very rare, so tombs get *very occasional* food districts
		}
	}

	drop_weight = {
		weight = @med

		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tundra
				#PD Cold Gaia
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_gaia
			}
		}
		modifier = {
			factor = 0.1
			is_planet_class = pc_nuked
		}
	}
}

d_boggy_fens = {
	time = 480

	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 600
			minerals = 200
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				engineering_research = 100
			}
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		planet_researchers_society_research_produces_add = 2
		pop_amenities_usage_mult = 0.05
		planet_jobs_food_produces_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
			pop_amenities_usage_mult = -0.05
			planet_researchers_society_research_produces_add = -2
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
			planet_colonist_society_research_produces_add = 2
		}
	}

	potential = {
		is_planet_class = pc_continental
		is_planet_class = pc_tundra
		is_planet_class = pc_alpine
		is_planet_class = pc_ocean
		is_planet_class = pc_tropical
		is_planet_class = pc_gaia
		is_planet_class = pc_nuked	# So tombs get very occasional farming
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 4
			is_planet_class = pc_tundra
		}
		modifier = {
			factor = 2
			is_planet_class = pc_ocean
		}
		modifier = {
			factor = 0.5
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0.1
			is_planet_class = pc_nuked
		}
	}
}

d_nutritious_mudland = {
	time = 90
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 600
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_farmers_unity_produces_add = 1
		pop_happiness = -0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
			planet_farmers_unity_produces_add = -1
			pop_happiness = 0.05
		}
	}

	drop_weight = {
		weight = @blocker_low
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tundra
				is_planet_class = pc_desert
			}
		}
		modifier = {
			factor = 0.5
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0.1
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
				is_planet_class = pc_alpine
				is_planet_class = pc_arctic
				is_planet_class = pc_gaia
			}
		}
	}
}

d_fungal_caves = {
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	prerequisites = {
		"tech_deep_sinkhole"
	}

	on_cleared = {
		# Add habitable cave?
	}

	planet_modifier = {
		district_farming_max = 1
		district_mining_max = 1
		planet_miners_minerals_produces_mult = -0.05
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 1
		}
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 0.5
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 4
			is_cold = yes
		}
		modifier = {
			factor = 2
			is_wet = yes
		}
		modifier = {
			factor = 0.5
			is_dry = yes
		}
	}
}

d_lush_jungle = {
	time = 480
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 400
		}
	}

	on_cleared = {
		add_resource = {
			minerals = 500
			consumer_goods = 50
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		planet_jobs_food_produces_mult = 0.1
		planet_researchers_society_research_produces_add = 3
		planet_researchers_physics_research_produces_add = 3
		planet_researchers_engineering_research_produces_add = 3
		planet_amenities_add = 5
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
			planet_researchers_society_research_produces_add = -3
			planet_researchers_physics_research_produces_add = -3
			planet_researchers_engineering_research_produces_add = -3
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
			planet_colonist_society_research_produces_add = 3
		}
	}

	potential = {
		is_wet = yes
	}

	drop_weight = {
		weight = @very_low
		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_gaia
			}
		}
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_ocean
			}
		}

		modifier = {
			factor = 10
			has_planet_modifier = pm_lush
		}
	}
}

d_fertile_lands = {
	time = 90
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 200
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_jobs_food_produces_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
		}
	}

	drop_weight = {
		weight = @blocker_high
		modifier = {
			factor = 5
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 2
			is_planet_class = pc_continental
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
				is_planet_class = pc_alpine
				is_planet_class = pc_tundra
				is_planet_class = pc_arid
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_arctic
				is_planet_class = pc_nuked
			}
		}

		modifier = {
			factor = 10
			has_deposit = d_great_river
		}
	}
}

d_great_river = {
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	resources = {
		category = deposit_blockers
		cost = {
			energy = 10000
		}
	}

	on_cleared = {
		add_deposit = d_hydro_plant
		add_deposit = d_great_river_obstructed
		add_deposit = d_floodplains
		add_deposit = d_floodplains
		add_deposit = d_floodplains
		add_deposit = d_floodplains
	}

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_farmers_food_produces_mult = 0.1
		planet_housing_mult = -0.1
		planet_amenities_add = 5
		trade_value_mult = 0.1
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 4
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_continental
				is_planet_class = pc_savannah
				is_planet_class = pc_tropical
			}
		}
		modifier = {
			factor = 0.66
			is_planet_class = pc_desert
		}
		modifier = {
			factor = 0.33
			OR = {
				is_planet_class = pc_alpine
				is_planet_class = pc_tundra
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_arctic
				is_planet_class = pc_arid
				is_planet_class = pc_ocean
				is_planet_class = pc_nuked
			}
		}
	}
}

d_black_soil = {
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_farmers_food_produces_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 2
			is_wet = yes
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_arid
			}
		}
		modifier = {
			factor = 0
			OR = {
				is_planet_class = pc_desert
				is_planet_class = pc_nuked
			}
		}
	}
}

d_teeming_reef = {
	time = 90
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 500
		}
		produces = {
			trigger = {
				has_planet_flag = reef_eco_preserve
			}
			society_research = 2
		}
	}

	can_be_cleared = {
		NOT = { has_planet_flag = reef_eco_preserve }
	}

	prerequisites = { "tech_toxic_kelp"	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_researchers_society_research_produces_add = 2
		planet_amenities_mult = 10
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				any_owned_pop = {
					has_job = colonist
				}
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
			planet_colonist_society_research_produces_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			is_planet_class = pc_ocean
			is_homeworld = no
		}
		modifier = {
			planet_max_districts_add = -1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner.species = {
				has_trait = trait_aquatic
			}
			is_homeworld = no
		}
		modifier = {
			planet_max_districts_add = 1
			district_farming_max = 1
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_gaia
			is_planet_class = pc_ocean
			is_planet_class = pc_continental
			is_planet_class = pc_arctic
		}
	}

	drop_weight = {
		weight = @med

		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_ocean
			}
		}
		modifier = {
			factor = 2
			is_planet_class = pc_continental
		}
		modifier = {
			factor = 0.5
			is_planet_class = pc_arctic
		}
		modifier = {
			factor = 4
			is_planet_class = pc_gaia
		}
		# Little bonus for aquatics on gaia.
		modifier = {
			factor = 2
			is_planet_class = pc_gaia
			owner.species = {
				has_trait = trait_aquatic
			}
		}
	}
}

d_marvelous_oasis = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 800
		}
		produces = {
			trigger = {
				is_dry = yes
			}
			unity = 5
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				engineering_research = 1000
			}
		}
	}

	prerequisites = {
		"tech_noxious_swamp"	#Xeno-Hydraulic Mastery
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_amenities_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
		}
	}

	drop_weight = {
		weight = @very_low
		modifier = {
			factor = 4
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 2
			is_planet_class = pc_desert
		}
		modifier = {
			factor = 0
			OR = {
				is_cold = yes
				is_wet = yes
				is_planet_class = pc_nuked
			}
		}

		modifier = {
			factor = 4
			has_deposit = d_searing_desert
		}
	}
}

d_tropical_island = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	resources = {
		category = deposit_blockers
		cost = {
			energy = 1200
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				food = 200
				minerals = 200
			}
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		district_mining_max = 1
		planet_amenities_add = 10
		pop_happiness = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = planet
			is_planet_class = pc_ocean
			is_homeworld = no
		}
		modifier = {
			planet_max_districts_add = -2
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_food_produces_add = 2
			planet_colonist_society_research_produces_add = 3
		}
	}

	potential = {
		OR = {
			is_planet_class = pc_continental
			is_planet_class = pc_ocean
			is_planet_class = pc_gaia
			is_planet_class = pc_nuked		#There's got to be one safe haven.
		}
	}

	drop_weight = {
		weight = @blocker_low
		modifier = {
			factor = 4
			OR = {
				is_planet_class = pc_ocean
				is_planet_class = pc_gaia
			}
		}
	}

}

d_fungal_forest = {
	time = 720
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	category = deposit_cat_food

	resources = {
		category = deposit_blockers
		cost = {
			energy = 800
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				food = 1000
				minerals = 200
				consumer_goods = 50
			}
		}
	}

	planet_modifier = {
		planet_max_districts_add = -2
		planet_jobs_food_produces_mult = 0.05
		planet_researchers_society_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 2
			planet_researchers_society_research_produces_add = -1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_society_research_produces_add = 2
		}
	}

	drop_weight = {
		weight = @med
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tundra
				is_planet_class = pc_alpine
			}
		}
		modifier = {
			factor = 0.5
			is_wet = yes
		}
		modifier = {
			factor = 0.1
			is_planet_class = pc_nuked
		}
		modifier = {
			factor = 0
			is_dry = yes
		}
	}
}

####################
#####	MOTES #####
####################

d_dust_caverns = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	potential = {
		can_have_habitable_deposits = yes
	}

	planet_modifier = {
		building_mote_harvesters_max = 1
	}

	drop_weight = {
		weight = @high_rare
		modifier = {
			factor = @planet_type_bonus
			is_dry = yes
		}
		modifier = {
			factor = 2
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0
			solar_system = {
				OR = {
					has_star_flag = empire_home_system
					has_star_flag = sol_system
					has_star_flag = deneb_system
				}
			}
		}
	}
}

d_dust_desert = {
	is_for_colonizable = yes
	category = deposit_cat_rare

	potential = {
		can_have_habitable_deposits = yes
	}

	planet_modifier = {
		building_mote_harvesters_max = 2
	}

	drop_weight = {
		weight = @high_rare
		modifier = {
			factor = @planet_type_bonus
			is_dry = yes
		}
		modifier = {
			factor = 2
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0
			solar_system = {
				OR = {
					has_star_flag = empire_home_system
					has_star_flag = sol_system
					has_star_flag = deneb_system
				}
			}
		}
	}
}


###################
##### SPECIAL #####
###################

### The Bloack Mod - Overwrite
#	Kind of an experiment in fusing technicians and miners to make this deposit more interesting.
d_betharian_deposit = {			
	is_for_colonizable = yes
	category = deposit_cat_rare_blocker

	potential = {
		can_have_habitable_deposits = yes
	}

	resources = {
		category = deposit_blockers
		cost = {
			energy = 500
			engineering_research = 1000		#This needs to be tested so it doesn't bug out and cause a definict.
		}
	}

	on_cleared = {
		owner = {
			add_resource = {
				energy = 2500
				minerals = 1000
			}
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		building_betharian_power_plant_max = 1
		planet_technician_energy_produces_mult = 0.1
		planet_technician_minerals_produces_add = 2
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_physics_research_produces_add = 2
		}
	}

	potential = {
		is_homeworld = no
	}

	drop_weight = {
		weight = @mid_rare
		modifier = {
			factor = 2
			is_planet_class = pc_gaia
		}
		modifier = {
			factor = 0
			solar_system = {
				OR = {
					has_star_flag = empire_home_system
					has_star_flag = sol_system
					has_star_flag = deneb_system
				}
			}
		}
	}
}

### Gaia Swaps

d_buzzing_plains = {
	time = 90
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	category = deposit_cat_energy

	resources = {
		category = deposit_blockers_natural
		cost = {
			energy = 200
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
		district_generator_max = 2
		planet_researchers_physics_research_produces_add = 1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_amenities_add = 1
			planet_researchers_physics_research_produces_add = -1
		}
	}

	triggered_planet_modifier = {
		potential = {
			any_owned_pop = {
				has_job = colonist
			}
		}
		modifier = {
			planet_colonist_energy_produces_add = 2
			planet_colonist_physics_research_produces_add = 1
		}
	}

	drop_weight = {
		weight = @very_low
		
		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_arid
				is_planet_class = pc_savannah
				is_planet_class = pc_continental
				is_planet_class = pc_tundra
				is_planet_class = pc_gaia
			}
		}
		modifier = {
			factor = 0.5
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_desert
			}
		}
	}
}

d_mineral_striations = {
	time = 360
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_minerals

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_mining_max = 1
		planet_miners_minerals_produces_mult = 0.05
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			owner.species = { has_trait = trait_aquatic }
			is_homeworld = no
		}
		modifier = {
			district_mining_max = -1
		}
	}

	drop_weight = {
		weight = @very_low

		modifier = {
			factor = 2
			OR = {
				is_planet_class = pc_tropical
				is_planet_class = pc_ocean
			}
		}
		
	}
}

d_natural_farmland = {
	time = 90
	
	is_for_colonizable = yes
	use_for_min_max_adjustments = yes

	category = deposit_cat_food_rare

	use_weights_for_terraforming_swap_types = yes
	should_swap_deposit_on_terraforming = yes

	planet_modifier = {
		planet_max_districts_add = -1
		district_farming_max = 1
		planet_farmers_food_produces_mult = 0.1
	}

	triggered_planet_modifier = {
		potential = {
			is_homeworld = yes
		}
		modifier = {
			planet_max_districts_add = 1
		}
	}

	drop_weight = {
		weight = @low
		modifier = {
			factor = 0
			is_planet_class = pc_nuked
		}
	}
}